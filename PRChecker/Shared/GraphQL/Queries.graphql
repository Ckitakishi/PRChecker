
fragment PRInfo on PullRequest {
    id
        
    isReadByViewer
    url
        
    repository {
        id
        nameWithOwner
    }
    baseRefName
    headRefName
        
    author {
        login
    }
    title
    body
        
    changedFiles
    additions
    deletions
    commits(last: 100) {
        nodes {
            id
        }
    }
    labels(last: 10) {
        nodes {
            id
            name
            color
        }
    }

    state
    viewerLatestReview {
        id
        state
    }
    mergedAt
    createdAt
}

query GetPRsByAuthor($author: String!) {
    user(login: $author) {
        id
        name
        pullRequests(last: 100, orderBy: { field:CREATED_AT, direction:DESC }, states: [OPEN, MERGED]) {
            nodes {
                ...PRInfo
            }
        }
    }
}

query GetAssignedPRsWithQuery($query: String!) {
    search(last: 100, query: $query, type: ISSUE) {
        edges {
            node {
                ... on PullRequest {
                    ...PRInfo
                }
            }
        }
    }
}
